<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ICMU | Member Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root { --bg: #0a0c0b; --card: #131816; --primary: #1ca65a; --border: rgba(255,255,255,0.05); --dim: #8e918f; }
        body { font-family: 'Montserrat', sans-serif; background: var(--bg); color: #fff; margin: 0; display: flex; height: 100vh; overflow: hidden; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .sidebar { width: 260px; background: #0d110f; border-right: 1px solid var(--border); padding: 30px 20px; }
        .container { flex: 1; padding: 40px; display: grid; grid-template-columns: 400px 1fr; gap: 30px; overflow-y: auto; }
        
        .panel { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid var(--border); transition: 0.3s; }
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-size: 10px; color: var(--dim); font-weight: 700; margin-bottom: 5px; }
        input { width: 100%; padding: 12px; background: #000; border: 1px solid var(--border); border-radius: 10px; color: #fff; box-sizing: border-box; transition: 0.3s; }
        input:focus { border-color: var(--primary); outline: none; }
        
        .btn { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: 700; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        .btn-green { background: var(--primary); color: #fff; }
        .btn-green:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(28,166,90,0.3); }
        
        canvas { width: 100%; border-radius: 15px; border: 1px solid var(--primary); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .hidden { display: none; }
    </style>
</head>
<body>
    <nav class="sidebar">
        <img src="icmu-logo.png" height="50" style="margin-bottom:30px;">
        <h4 style="color:var(--primary); font-size:12px; letter-spacing:1px;">CARD GENERATOR</h4>
        <a href="admin.html" style="color:var(--dim); text-decoration:none; font-size:13px; display:block; margin-top:20px;"><i class="fa-solid fa-arrow-left"></i> Dashboard</a>
    </nav>
    <div class="container">
        <div class="panel">
            <div class="input-group"><label>FULL NAME</label><input type="text" id="nIn" oninput="update()" placeholder="Enter Name"></div>
            <div class="input-group"><label>INDEX NO</label><input type="text" id="iIn" oninput="update()" placeholder="0000"></div>
            <div class="input-group"><label>REG NO</label><input type="text" id="rIn" oninput="update()" placeholder="00M000"></div>
            <button class="btn btn-green" onclick="download('png')">DOWNLOAD PNG</button>
            <button class="btn" style="background:#222; color:#fff;" onclick="download('pdf')">EXPORT PDF</button>
        </div>
        <div><canvas id="c" width="1016" height="638"></canvas></div>
    </div>

    <script>
        const canvas = document.getElementById("c");
        const ctx = canvas.getContext("2d");
        const logoA = new Image(); logoA.src = "ic-logo.png";
        const logoB = new Image(); logoB.src = "icmu-logo.png";

        async function update() {
            const name = document.getElementById('nIn').value || "FULL NAME";
            const idx = document.getElementById('iIn').value || "0000";
            const reg = document.getElementById('rIn').value || "00M000";

            // Background
            ctx.fillStyle = "#000"; ctx.fillRect(0, 0, 1016, 638);
            
            // Slogan Bar (Bottom)
            ctx.fillStyle = "rgba(28, 166, 90, 0.15)";
            ctx.fillRect(0, 580, 1016, 58);
            ctx.fillStyle = "#1ca65a";
            ctx.font = "italic 600 20px Montserrat";
            ctx.textAlign = "center";
            ctx.fillText("THE VOICE OF THE GREEN MACHINE", 508, 615);
            ctx.textAlign = "left";

            // Text Styles
            ctx.fillStyle = "#fff";
            ctx.font = "700 42px Montserrat"; ctx.fillText("MEMBERSHIP CARD", 50, 100);
            
            // Photo Placeholders & Data
            ctx.fillStyle = "#fff";
            ctx.font = "500 16px Montserrat"; ctx.fillText("NAME", 380, 240);
            ctx.font = "700 32px Montserrat"; ctx.fillText(name.toUpperCase(), 380, 280);
            
            ctx.font = "500 16px Montserrat"; ctx.fillText("INDEX NO", 380, 360);
            ctx.font = "700 32px Montserrat"; ctx.fillText(idx, 380, 400);

            if(logoA.complete && logoB.complete) {
                ctx.drawImage(logoA, 810, 50, 65, 65);
                ctx.drawImage(logoB, 890, 50, 65, 65);
            }
        }
        window.onload = () => setTimeout(update, 500);
    </script>
</body>
</html>
